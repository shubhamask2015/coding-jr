<!DOCTYPE html>
<html lang="en-in">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Jr.</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <nav>
            <div class="brand">
                <img src="https://codingjr.school/uploads/system/coding_jr/logo-dark.png" alt="CodingJr">
            </div>
            <ul class="bread-crumb">
                <li><a href="#">Class 12</a><i class="fas fa-angle-right"></i></li>
                <li><a href="#">Web development</a><i class="fas fa-angle-right"></i></li>
                <li><a href="#">HTML</a></li>
            </ul>
            <div class="user">
                <i class="fas fa-user"></i>
            </div>
            
            <div class="dropdown">
                <button id="user-drp">Vikash <i class="fas fa-caret-down"></i></button>
                <div class="dropdown-content" id="drp-cnt">
                    <div class="item">Visit Link #1</div>
                    <div class="item">Visit Link #2</div>
                    <div class="item">Visit Link #3</div>
                    <div class="item">Visit Link #4</div>
                </div>
            </div>
            <i class="fas fa-bars" onclick="sideNavRight()" id="nav-fa-bar"></i>
            <i class="fas fa-times" id="nav-fa-times" onclick="sideNavRight()"></i>
        </nav>
        <main>
            <div class="left">
                <div class="img-top">
                    <i class="fas fa-file-pdf"></i>
                    <div class="middle">
                        <p>HTML <span>PDF</span></p>
                    </div>
                    <div class="end">
                        <i class="fas fa-search"></i>
                        <i class="fas fa-ellipsis-h"></i>
                    </div>
                </div>
                <div class="thumbnail">
                    <div class="img-container">
                        <div class="p0">
                            <i class="fas fa-mouse-pointer"></i>
                        </div>
                        <div class="p1">
                            <!-- <img src="https://i.pinimg.com/originals/f3/38/dd/f338dde47c7e6f845f3e9ae1def5bcfd.jpg" alt="Thumbnail"> -->
                            <canvas id="pdf-canvas"></canvas>
                        </div>
                        <div class="p2">
                            <i class="fas fa-th-large"></i>
                            <div class="p2-inner">
                                <div id="full-screen"><i class="fas fa-expand"></i></div>
                                <button id="current-page">1</button>
                                <span id="total-page">27</span>
                                <i class="fas fa-angle-up" id="next-page"></i>
                                <i class="fas fa-angle-down" style="color: #ccc;" id="prev-page"></i>
                                <i class="fas fa-file-code"></i>
                                <i class="fas fa-search-plus" id="zoom-out"></i>
                                <i class="fas fa-search-minus" id="zoom-in"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Thumbnail Footer -->
                    <div class="thumb-footer">
                        <p><b>PPT:</b>Introduction to HTML</p><span><b>Practice</b><i class="fas fa-angle-double-down"></i></span>
                    </div>
                </div>
            </div>
            <div class="right" id="nav-right">
                <!-- First Acordian -->
                <div class="acordian">
                    <div class="title" id="drp-dwn-btn-1" onclick="toggleContent('drp-dwn-btn-1', 'drp-dwn-1')"><h4>Introduction to HTML</h4><i class="fas fa-caret-down"></i></div>
                    <div class="content" id="drp-dwn-1">
                        <div class="title" onclick="toggleContent('drp-dwn-btn-1', 'drp-dwn-1')">
                            <h4>Introduction to HTML</h4><i class="fas fa-caret-up"></i>
                        </div>
                        <!-- Vide -->
                        <div class="sub-title">
                            <div class="p1">
                                <i class="far fa-play-circle"></i>
                                <p>Video:</p>
                            </div>
                            <div class="p2">
                                <i class="fas fa-check-circle"></i>
                                <p>5:00</p>
                            </div>
                        </div>
                        <!-- PPT -->
                        <div class="sub-title">
                            <div class="p1" style="padding-left: 3px;">
                                <i class="fas fa-file-powerpoint"></i>
                                <p>PPT:</p>
                            </div>
                            <div class="p2">
                                <i class="fas fa-check-circle"></i>
                                <p>3:30</p>
                            </div>
                        </div>
                        <!-- Notes -->
                        <div class="sub-title">
                            <div class="p1" style="padding-left: 3px;">
                                <i class="fas fa-file-alt"></i>
                                <p>Notes:</p>
                            </div>
                            <div class="p2">
                                <p>2:00</p>
                            </div>
                        </div>
                        <!-- Quize -->
                        <div class="sub-title">
                            <div class="p1">
                                <i class="far fa-question-circle"></i>
                                <p>Quiz:</p>
                            </div>
                            <div class="p2">
                                <p>7:15</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Secoend Acordian -->
                <div class="acordian">
                    <div class="title" id="drp-dwn-btn-2" onclick="toggleContent('drp-dwn-btn-2', 'drp-dwn-2')"><h4>Adding Images, Videos and Tables</h4><i class="fas fa-caret-down"></i></div>
                    <div class="content" id="drp-dwn-2">
                        <div class="title" onclick="toggleContent('drp-dwn-btn-2', 'drp-dwn-2')">
                            <h4>Adding Images, Videos and Tables</h4><i class="fas fa-caret-up"></i>
                        </div>
                        <!-- Vide -->
                        <div class="sub-title">
                            <div class="p1">
                                <i class="far fa-play-circle"></i>
                                <p>Video: Adding Images</p>
                            </div>
                            <div class="p2">
                                <i class="fas fa-check-circle"></i>
                                <p>5:00</p>
                            </div>
                        </div>
                        <!-- PPT -->
                        <div class="sub-title">
                            <div class="p1" style="padding-left: 3px;">
                                <i class="fas fa-file-powerpoint"></i>
                                <p>PPT: Adding Images</p>
                            </div>
                            <div class="p2">
                                <i class="fas fa-check-circle"></i>
                                <p>3:30</p>
                            </div>
                        </div>
                        <!-- Notes -->
                        <div class="sub-title">
                            <div class="p1" style="padding-left: 3px;">
                                <i class="fas fa-file-alt"></i>
                                <p>Notes: Adding Images</p>
                            </div>
                            <div class="p2">
                                <p>2:00</p>
                            </div>
                        </div>
                        <!-- Quize -->
                        <div class="sub-title">
                            <div class="p1">
                                <i class="far fa-question-circle"></i>
                                <p>Quiz: Adding Images</p>
                            </div>
                            <div class="p2">
                                <p>7:15</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <div class="pdf-viewer">
            <div class="canvas-container">
                
            </div>
        </div>
    </div>
    <!-- PDF Js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <!-- JQuery & Javascripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Pdf rRendering -->
    <script>
        const canvas = document.getElementById('pdf-canvas');
        let pdfInfo = {
            pdf:null,
            scale:0.51,
            currentPage:1,
            pendingPageNum:null,
            totalPages:0,
            ctx:canvas.getContext('2d'),
            pageRendring:false,

        };

        function renderPage(num){
            pdfInfo.pageRendring = true;
            pdfInfo.currentPage = num;

            //pdf-nav styles
            if(pdfInfo.currentPage > 1) $('#prev-page').css('color', '#777');
            if(pdfInfo.currentPage < pdfInfo.totalPages) $('#next-page').css('color', '#777');
            pdfInfo.pdf.getPage(pdfInfo.currentPage).then(page =>{
                let viewport = page.getViewport({scale:pdfInfo.scale});
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                //Rendering Page
                let renderContext ={
                    canvasContext:pdfInfo.ctx,
                    viewport:viewport,
                }

                page.render(renderContext).promise.then(()=>{
                    pdfInfo.pageRendring = false;
                    if(pdfInfo.pendingPageNum != null){
                        renderPage(pdfInfo.pendingPageNum)
                        pdfInfo.pendingPageNum = null;
                    }
                })
            });
            $('#current-page').text(pdfInfo.currentPage);
        }

        //Previos and Next Pages Handler
        function pageRenderQ(num){
            if(pdfInfo.pageRendring){
                pdfInfo.pendingPageNum = num;
            }
            else{
                renderPage(num);
            }
        }

        function nextPage(){
            let nextPageNum = pdfInfo.currentPage+1;
            if( nextPageNum == pdfInfo.pdf.numPages){
                $('#next-page').css('color','#ccc');
            }
            if( nextPageNum > pdfInfo.pdf.numPages) return;
            pageRenderQ(nextPageNum);
        }

        function prevPage(){
            let prevNum = pdfInfo.currentPage-1;
            if(prevNum == 1){
                $('#prev-page').css('color','#ccc');
            }
            if(prevNum < 1) return;
            pageRenderQ(prevNum);
        }

        //page zoom-in zoom-out
        function zoomIn(){
            let zoom = pdfInfo.scale - 0.02;
            if(zoom > 0){
                pdfInfo.scale = zoom;
                pageRenderQ(pdfInfo.currentPage);
            }
        }

        function zoomOut(){
            let zoom = pdfInfo.scale + 0.02;
            if(zoom < 1){
                pdfInfo.scale = zoom;
                pageRenderQ(pdfInfo.currentPage);
            }
        }

        function pdfZoom(scl){
            pdfInfo.scale = scl;
        }
        
        //Initial Page Renderer
        pdfjsLib.getDocument('htmlTutorial.pdf').promise.then(pdf => {
            pdfInfo.pdf = pdf;
            pdfInfo.totalPages = pdf._pdfInfo.numPages;
            console.log(pdf._pdfInfo.numPages)
            $('#total-page').text(pdfInfo.totalPages);

            //checks for mobile devices
            let page = pdfInfo.currentPage??1;
            const mobileDevices = window.matchMedia('(max-width:578px)');
            if(mobileDevices.matches){
                pdfZoom(0.2);
                renderPage(pdfInfo.currentPage);
            }
            else{
                renderPage(pdfInfo.currentPage);
            }
            
        });
    </script>

    <!-- PDF Navigation -->
    <script>
        $('#next-page').click(()=>{
            nextPage();
        });

        $('#prev-page').click(()=>{
            prevPage();
        });

        $('#zoom-in').click(()=>{
            zoomIn();
        });

        $('#zoom-out').click(()=>{
            zoomOut();
        });
    </script>

    <!-- Handels Button clicks -->
    <script>
        //Full screen handling
        $(document).ready(function() {
            $("#full-screen").click(function() {
              if (!document.fullscreenElement) {
                $("#full-screen").css({'color':'red', 'font-weight':'bolder'});
                document.documentElement.requestFullscreen();
              } else {
                $("#full-screen").css('color','#333');
                document.exitFullscreen();
              }
            });
          });

        //user dropdown menue
        let btn = $('#user-drp');
        let dropdownContent = $('#drp-cnt');
        btn.click(()=>{
            if(dropdownContent.css('display') == 'block'){
                dropdownContent.css('display', 'none');
            }else{
                dropdownContent.css('display', 'block');
            }
        });

        //Accordian Content hide - display
        function toggleContent(btnId, dropdownId) {
            const drpBtn = $(`#${btnId}`);
            const contentElement = $(`#${dropdownId}`);
            if (contentElement.css('display') == 'none') {
                contentElement.css('display', 'block');
                drpBtn.css('display', 'none');
            } else {
                contentElement.css('display', 'none');
                drpBtn.css('display', 'flex');
            }
        }

        //Right sidebar show - hide
        function sideNavRight(){
            const faBtnBars = $('#nav-fa-bar')
            const faBtnCross  = $('#nav-fa-times')
            const rightNav = $('#nav-right')

            if(faBtnCross.css('display') == 'none'){
                faBtnCross.css('display', 'block');
                faBtnBars.css('display','none');
                rightNav.css('display', 'block');
            }else{
                faBtnCross.css('display', 'none');
                faBtnBars.css('display', 'block');
                rightNav.css('display', 'none');
            }
        }
    </script>

    <!-- Media Queries -->
    <script>
        /*const mobileDevices = window.matchMedia('(max-width:578px)');
        if(mobileDevices.matches){
            pdfZoom(0.2, page);
        }*/

        window.addEventListener('resize', ()=>{
            let scrWidth = window.innerWidth;
            if(scrWidth <= 578){
                pdfZoom(0.2);
            }
            else if(scrWidth <= 778){
                pdfZoom(0.4);
            }
            else{
                pdfZoom(0.51);
            }

            renderPage(pdfInfo.currentPage);
        })
    </script>
</body>
</html>
